<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SkyWallet PRO</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        :root { --bg: #0b0f19; --primary: #4f46e5; --text: #fff; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; text-align: center; }
        .card { background: rgba(255,255,255,0.05); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); width: 85%; max-width: 400px; }
        .btn-google { background: white; color: black; padding: 15px; border-radius: 12px; border: none; width: 100%; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 1rem; }
        .hidden { display: none !important; }
        #balanceCard { background: linear-gradient(135deg, #4f46e5, #9333ea); padding: 20px; border-radius: 15px; margin-top: 20px; }
    </style>
</head>
<body>

<div id="loginSection" class="card">
    <h1>SkyWallet</h1>
    <p style="opacity: 0.6;">Investment Made Simple</p>
    <button id="loginBtn" class="btn-google">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/pwa_google_symbol.svg" width="20">
        Google se Login Karein
    </button>
</div>

<div id="appSection" class="card hidden">
    <h3>Namaste, <span id="uName">User</span></h3>
    <div id="balanceCard">
        <p style="font-size: 0.8rem; margin:0;">TOTAL BALANCE</p>
        <h2 id="balanceDisplay">â‚¹0</h2>
    </div>
    <button onclick="logout()" style="margin-top:20px; background:none; border:none; color:#ff4d4d; font-weight:bold; cursor:pointer;">Logout</button>
</div>

<script>
    // Aapke confirmed credentials
    const SUPABASE_URL = 'https://eccygkwacovigfescghn.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVjY3lna3dhY292aWdmZXNjZ2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIzMDQ0NzQsImV4cCI6MjA4Nzg4MDQ3NH0.OyoD5LR2bXgmi2IEHmWvcEAqM_xeewHdQM1DnsNCnOU';

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // Direct Event Listener (Mobile stability ke liye)
    document.getElementById('loginBtn').addEventListener('click', async () => {
        const { error } = await supabase.auth.signInWithOAuth({
            provider: 'google',
            options: {
                // Aapka Github Page URL
                redirectTo: 'https://khanziyam20-alt.github.io/InvestAmount/'
            }
        });
        if (error) alert("Login Error: " + error.message);
    });

    // Auth state check
    supabase.auth.onAuthStateChange((event, session) => {
        if (session) {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('appSection').classList.remove('hidden');
            document.getElementById('uName').innerText = session.user.user_metadata.full_name;
        }
    });

    async function logout() {
        await supabase.auth.signOut();
        location.reload();
    }
</script>
</body>
</html>
